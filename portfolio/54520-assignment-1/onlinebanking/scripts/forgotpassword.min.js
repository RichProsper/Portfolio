import Header from"../../scripts/header.min.js";import{redirectLoggedInUser}from"./utilities.min.js";redirectLoggedInUser(),Header(),document.querySelector("form").addEventListener("submit",(function(e){e.preventDefault();const t=document.getElementById("failure"),r=t.children[1],o=document.getElementById("success"),s=this.userId.value.trim(),n=this.email.value.trim(),i=this.newPassword.value.trim();if(i!==this.confirmNewPassword.value.trim())return r.textContent="New Password and Confirm New Password don't match.",void t.openAlert();if(null===localStorage.getItem("users"))return r.textContent="User Not Found.",void t.openAlert();const l=JSON.parse(localStorage.getItem("users"));for(let e=0;e<l.length;e++)if(l[e].userId===s&&l[e].email===n)return l[e].password=i,localStorage.setItem("users",JSON.stringify(l)),localStorage.setItem("currentUser",JSON.stringify(l[e])),o.openAlert(),void setTimeout((()=>location.href="index.html"),5201);r.textContent="User Not Found.",t.openAlert()}));